{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Layout, Page, Card } from '@shopify/polaris';\nimport DisplayOrders from '../client/components/DisplayOrders';\nimport SearchOrdersSpecific from '../client/components/SearchOrdersSpecific';\nimport SearchOrdersCustomize from '../client/components/SearchOrdersCustomize';\nimport { GET_SHOP_ID } from '../server/config/appBasicQuery.js';\nimport { useQuery } from 'react-apollo';\nimport axios from 'axios';\n\nconst config = require('../server/config/httpConfig.js');\n\nimport '../client/css/AppStyle.css';\n\nfunction AnalyticsLayout() {\n  const isInitialMount = useRef(true);\n  const {\n    0: shopId,\n    1: setShopId\n  } = useState();\n  const {\n    0: coupon,\n    1: setCoupon\n  } = useState();\n  const {\n    0: date,\n    1: setDate\n  } = useState('today');\n  const {\n    0: refresh,\n    1: setRefresh\n  } = useState(false);\n  const para = {\n    coupon,\n    date\n  };\n  const {\n    error,\n    data\n  } = useQuery(GET_SHOP_ID);\n  if (error) return __jsx(\"div\", null, \"error\");\n  if (data && !shopId) setShopId(config.ExtractId(data.shop.id));\n  useEffect(() => {\n    async function getData() {\n      const search_data = {\n        search: shopId\n      };\n      await axios.post(config.HTTP_API + '/store/search/discount', search_data).then(result => {\n        result.data[0].discount_code ? setCoupon(result.data[0].discount_code) : null;\n      });\n    }\n\n    async function fetchData() {\n      if (isInitialMount.current && shopId) {\n        isInitialMount.current = false;\n        await getData();\n      }\n    }\n\n    fetchData();\n  });\n  return __jsx(\"div\", null, __jsx(\"div\", {\n    className: \"navigationMain\"\n  }, __jsx(\"div\", null, __jsx(\"p\", null, __jsx(\"a\", {\n    href: \"/index\"\n  }, \"Front Page\"))), __jsx(\"div\", null, __jsx(\"p\", null, __jsx(\"a\", {\n    href: \"/annotated-layout\"\n  }, \"Setting\"))), __jsx(\"div\", null, __jsx(\"p\", null, __jsx(\"a\", {\n    href: \"/design-layout\"\n  }, \"Design\"))), __jsx(\"div\", null, __jsx(\"p\", null, __jsx(\"a\", {\n    style: {\n      'color': '#5c6ac4'\n    },\n    href: \"/analytics-layout\"\n  }, \"Analytics\"))), __jsx(\"div\", null, __jsx(\"p\", null, __jsx(\"a\", {\n    href: \"/faq-layout\"\n  }, \"FAQ\")))), __jsx(Page, null, __jsx(Layout, null, __jsx(Layout.Section, null, __jsx(Card, {\n    title: \"App Analytics\",\n    sectioned: true\n  }, __jsx(\"p\", null, \"Create report to view a summary of your app's discount code performance\"), __jsx(DisplayOrders, {\n    valueCODE: para\n  })), __jsx(SearchOrdersSpecific, {\n    setDate: setDate\n  }), __jsx(SearchOrdersCustomize, {\n    setDate: setDate\n  })))));\n}\n\nexport default AnalyticsLayout;","map":{"version":3,"sources":["C:/Users/molek/OneDrive/Desktop/Work/Magic-Upsell/pages/analytics-layout.js"],"names":["React","useState","useEffect","useRef","Layout","Page","Card","DisplayOrders","SearchOrdersSpecific","SearchOrdersCustomize","GET_SHOP_ID","useQuery","axios","config","require","AnalyticsLayout","isInitialMount","shopId","setShopId","coupon","setCoupon","date","setDate","refresh","setRefresh","para","error","data","ExtractId","shop","id","getData","search_data","search","post","HTTP_API","then","result","discount_code","fetchData","current"],"mappings":"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","sourcesContent":["import React, { useState,useEffect,useRef } from 'react';\r\nimport {\r\n  Layout,\r\n  Page,\r\n  Card,\r\n} from '@shopify/polaris';\r\nimport DisplayOrders from '../client/components/DisplayOrders';\r\nimport SearchOrdersSpecific from '../client/components/SearchOrdersSpecific';\r\nimport SearchOrdersCustomize from '../client/components/SearchOrdersCustomize';\r\nimport {GET_SHOP_ID} from '../server/config/appBasicQuery.js';\r\nimport { useQuery } from 'react-apollo';\r\nimport axios from 'axios';\r\nconst config = require('../server/config/httpConfig.js');\r\nimport '../client/css/AppStyle.css';\r\n\r\nfunction AnalyticsLayout() {\r\n  const isInitialMount = useRef(true);\r\n  const [shopId, setShopId] = useState();\r\n  const [coupon, setCoupon] = useState();\r\n  const [date, setDate] = useState('today');\r\n  const [refresh, setRefresh] = useState(false);\r\n  const para = {coupon,date};\r\n\r\n  const {error, data} = useQuery(GET_SHOP_ID);\r\n  if(error) return <div>error</div>\r\n  if(data && !shopId) setShopId(config.ExtractId(data.shop.id));\r\n\r\n  useEffect(() => {\r\n    async function getData() {\r\n      const search_data = {search:shopId};\r\n      await axios.post(config.HTTP_API + '/store/search/discount', search_data).then(result => {\r\n          result.data[0].discount_code ? setCoupon(result.data[0].discount_code) : null;\r\n        });\r\n    }\r\n    async function fetchData(){\r\n      if(isInitialMount.current && shopId) {\r\n        isInitialMount.current = false;\r\n        await getData();\r\n      }\r\n    }\r\n    fetchData();\r\n  });\r\n\r\n\r\n  return (\r\n    <div>\r\n    <div className=\"navigationMain\">\r\n      <div><p><a href=\"/index\">Front Page</a></p></div>\r\n      <div><p><a href=\"/annotated-layout\">Setting</a></p></div>\r\n      <div><p><a href=\"/design-layout\">Design</a></p></div>\r\n      <div><p><a style={{'color':'#5c6ac4'}} href=\"/analytics-layout\">Analytics</a></p></div>\r\n      <div><p><a href=\"/faq-layout\">FAQ</a></p></div>\r\n    </div>\r\n    <Page>\r\n      <Layout>\r\n        <Layout.Section>\r\n          <Card title=\"App Analytics\" sectioned>\r\n            <p>Create report to view a summary of your app's discount code performance</p>\r\n            <DisplayOrders valueCODE={para}/>\r\n          </Card>\r\n          <SearchOrdersSpecific setDate={setDate}/>\r\n          <SearchOrdersCustomize setDate={setDate}/>\r\n        </Layout.Section>\r\n      </Layout>\r\n    </Page>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AnalyticsLayout;\r\n"]},"metadata":{},"sourceType":"module"}