{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport { Card, Stack, Badge } from '@shopify/polaris';\nimport { useQuery } from 'react-apollo';\nimport { GET_PRODUCTS_BY_ID } from '../../server/config/appBasicQuery.js';\nimport '../css/AppStyle.css';\nimport axios from 'axios';\nimport { Refresh } from './ProductPicker.js';\n\nvar config = require('../../server/config/httpConfig.js');\n\nfunction ProductList(_ref) {\n  _s();\n\n  var valueID = _ref.valueID;\n  var isInitialMount = useRef(true);\n\n  var _useState = useState(),\n      productArray = _useState[0],\n      setProductArray = _useState[1];\n\n  var _useContext = useContext(Refresh),\n      refresh = _useContext.refresh,\n      setRefresh = _useContext.setRefresh;\n\n  var _useState2 = useState(),\n      p1 = _useState2[0],\n      setP1 = _useState2[1];\n\n  var _useState3 = useState(),\n      p2 = _useState3[0],\n      setP2 = _useState3[1];\n\n  var _useState4 = useState(),\n      p3 = _useState4[0],\n      setP3 = _useState4[1];\n\n  var _useState5 = useState(),\n      p4 = _useState5[0],\n      setP4 = _useState5[1];\n\n  useEffect(function () {\n    function getData() {\n      return _getData.apply(this, arguments);\n    }\n\n    function _getData() {\n      _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var db_data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                db_data = {\n                  search: valueID\n                };\n                _context.next = 3;\n                return axios.post(config.HTTP_API + '/store/search/products', db_data).then(function (result) {\n                  result.data[0].product_first ? setP1(result.data[0].product_first) : null;\n                  result.data[0].product_second ? setP2(result.data[0].product_second) : null;\n                  result.data[0].product_third ? setP3(result.data[0].product_third) : null;\n                  result.data[0].product_forth ? setP4(result.data[0].product_forth) : null;\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _getData.apply(this, arguments);\n    }\n\n    function fetchData() {\n      return _fetchData.apply(this, arguments);\n    }\n\n    function _fetchData() {\n      _fetchData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(isInitialMount.current && valueID)) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                isInitialMount.current = false;\n                _context2.next = 4;\n                return getData();\n\n              case 4:\n                if (!(!isInitialMount.current && refresh)) {\n                  _context2.next = 12;\n                  break;\n                }\n\n                setP1('');\n                setP2('');\n                setP3('');\n                setP4('');\n                _context2.next = 11;\n                return getData();\n\n              case 11:\n                setRefresh(false);\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      return _fetchData.apply(this, arguments);\n    }\n\n    fetchData();\n  });\n  return __jsx(\"div\", {\n    className: \"product-list\"\n  }, __jsx(\"h2\", {\n    style: {\n      marginBottom: '10px'\n    }\n  }, \"Selected products\"), __jsx(Stack, null, __jsx(Stack.Item, null, __jsx(Badge, {\n    status: \"success\"\n  }, p1)), __jsx(Stack.Item, null, __jsx(Badge, {\n    status: \"success\"\n  }, p2)), __jsx(Stack.Item, null, __jsx(Badge, {\n    status: \"success\"\n  }, p3)), __jsx(Stack.Item, null, __jsx(Badge, {\n    status: \"success\"\n  }, p4))));\n}\n\n_s(ProductList, \"Di8tG6O6ASVnPmJjlamC97jyTNo=\");\n\n_c = ProductList;\nexport default ProductList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"sources":["C:/Users/molek/OneDrive/Desktop/Work/Magic-Upsell/client/components/ProductList.js"],"names":["React","useState","useEffect","useRef","useContext","Card","Stack","Badge","useQuery","GET_PRODUCTS_BY_ID","axios","Refresh","config","require","ProductList","valueID","isInitialMount","productArray","setProductArray","refresh","setRefresh","p1","setP1","p2","setP2","p3","setP3","p4","setP4","getData","db_data","search","post","HTTP_API","then","result","data","product_first","product_second","product_third","product_forth","fetchData","current","marginBottom"],"mappings":"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","sourcesContent":["import React, { useState,useEffect,useRef,useContext } from 'react';\r\nimport {\r\n  Card,Stack,Badge\r\n} from '@shopify/polaris';\r\nimport { useQuery } from 'react-apollo';\r\nimport {GET_PRODUCTS_BY_ID} from '../../server/config/appBasicQuery.js';\r\nimport '../css/AppStyle.css';\r\nimport axios from 'axios';\r\nimport {Refresh} from './ProductPicker.js';\r\nconst config = require('../../server/config/httpConfig.js');\r\n\r\nfunction ProductList ({valueID}) {\r\n  const isInitialMount = useRef(true);\r\n  const [productArray, setProductArray] = useState();\r\n  let {refresh, setRefresh} = useContext(Refresh);\r\n  const [p1, setP1] = useState();\r\n  const [p2, setP2] = useState();\r\n  const [p3, setP3] = useState();\r\n  const [p4, setP4] = useState();\r\n\r\n  useEffect(() => {\r\n    async function getData() {\r\n      const db_data = {search:valueID};\r\n      await axios.post(config.HTTP_API + '/store/search/products', db_data).then(result => {\r\n        result.data[0].product_first ? setP1(result.data[0].product_first) : null;\r\n        result.data[0].product_second ? setP2(result.data[0].product_second) : null;\r\n        result.data[0].product_third ? setP3(result.data[0].product_third) : null;\r\n        result.data[0].product_forth ? setP4(result.data[0].product_forth) : null;\r\n      });\r\n    }\r\n    async function fetchData(){\r\n      if (isInitialMount.current && valueID) {\r\n       isInitialMount.current = false;\r\n       await getData();\r\n      }\r\n      if(!isInitialMount.current && refresh) {\r\n        setP1('');setP2('');setP3('');setP4('');\r\n        await getData();\r\n        setRefresh(false);\r\n      }\r\n    }\r\n    fetchData();\r\n  });\r\n\r\n  return (\r\n    <div className=\"product-list\">\r\n      <h2 style={{marginBottom:'10px'}}>Selected products</h2>\r\n      <Stack>\r\n        <Stack.Item><Badge status=\"success\">{p1}</Badge></Stack.Item>\r\n        <Stack.Item><Badge status=\"success\">{p2}</Badge></Stack.Item>\r\n        <Stack.Item><Badge status=\"success\">{p3}</Badge></Stack.Item>\r\n        <Stack.Item><Badge status=\"success\">{p4}</Badge></Stack.Item>\r\n      </Stack>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductList;\r\n"]},"metadata":{},"sourceType":"module"}